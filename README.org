#+TITLE: Moom - A Moom port to GNU Emacs
#+STARTUP: showall

* Commands to control frame by keyboard
** Move

 - moom-move-frame

*** Horizontal

 - moom-move-frame-left
 - moom-move-frame-right

*** Center

 - moom-move-frame-to-center
 - moom-move-frame-to-vertical-center
 - moom-move-frame-to-horizontal-center

** Fit to edge

 - moom-move-frame-to-edge-left
 - moom-move-frame-to-edge-right
 - moom-move-frame-to-edge-top
 - moom-move-frame-to-edge-bottom

** Expand

 - moom-change-frame-width-single
 - moom-change-frame-width-double
 - moom-change-frame-width-half-again
 - moom-change-frame-width
 - moom-change-frame-height
 - moom-open-height-ring

** Fill display

 - moom-fill-display ;; ARG = {'top, 'bottom, 'left, 'right}
 - moom-fit-frame-to-fullscreen

** Other functions

 - moom-print-status
 - moom-restore-last-status
 - moom-version

* Extension to integrate font resizing

No need to load =moom-font.el= explicitly. If the package is installed in your system, then it will be activated automatically. The package is basically for the users who rely on Japanese fonts.

** Resize font

 - moom-font-increase
 - moom-font-decrease
 - moom-font-size-reset

* Example keybindings
** Overview

In general, =Cmd-<TAB>= is used to switch windows, which is not limited to Emacs.app. So it is natural to concentrate all keybindings associated to control frame position and size into the left side of your keyboard with pressing =Cmd=. The following example keybindings are basically designed in that manner.

#+CAPTION: Assgined keys
[[./fig/layout.png]]

** Move

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "M-0") 'moom-move-frame) ;; to top-left corner
(global-set-key (kbd "M-1") 'moom-move-frame-left)
(global-set-key (kbd "M-2") 'moom-move-frame-to-center)
(global-set-key (kbd "M-3") 'moom-move-frame-right)
#+END_SRC

** Fit

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "M-<f1>") 'moom-move-frame-to-edge-left)
(global-set-key (kbd "M-<f3>") 'moom-move-frame-to-edge-right)
(global-set-key (kbd "<f1>") 'moom-move-frame-to-edge-top)
(global-set-key (kbd "S-<f1>") 'moom-move-frame-to-edge-bottom)
#+END_SRC

** Expand

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "C-c f s") 'moom-change-frame-width-single)
(global-set-key (kbd "C-c f d") 'moom-change-frame-width-double)
(global-set-key (kbd "C-c f a") 'moom-change-frame-width-half-again)
(global-set-key (kbd "<f2>") 'moom-open-height-ring) ;; cycle heights on a list
#+END_SRC

** Fill

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "C-c f f t") 'my-moom-fill-top)
(global-set-key (kbd "C-c f f b") 'my-moom-fill-bottom)
(global-set-key (kbd "C-c f f l") 'my-moom-fill-left)
(global-set-key (kbd "C-c f f r") 'my-moom-fill-right)
(defun my-moom-fill-top () (interactive) (moom-fill-display 'top))
(defun my-moom-fill-bottom () (interactive) (moom-fill-display 'bottom))
(defun my-moom-fill-left () (interactive) (moom-fill-display 'left))
(defun my-moom-fill-right () (interactive) (moom-fill-display 'right))))
#+END_SRC

** Fill (screen by toggle)

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "M-<f2>") 'my-toggle-frame-maximized)

(defvar my-fullscreen-flag nil)
(add-hook 'moom-before-fullscreen-hook #'moom--save-last-status)
(add-hook 'moom-after-fullscreen-hook #'moom-move-frame-to-center)
(defun my-toggle-frame-maximized ()
  (interactive)
  (setq my-fullscreen-flag (not my-fullscreen-flag))
  (if my-fullscreen-flag
      (moom-fit-frame-to-fullscreen)
    (moom-restore-last-status)))
#+END_SRC

** Resize and reset (moom-font.el is required)

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "C--") 'moom-font-decrease)
(global-set-key (kbd "C-=") 'moom-font-increase)
(global-set-key (kbd "C-_") 'text-scale-decrease) ;; built-in for ascii
(global-set-key (kbd "C-+") 'text-scale-increase) ;; built-in for ascii
(global-set-key (kbd "C-c f f m") 'my-mid-font-size)
(global-set-key (kbd "C-c f f 0") 'my-frame-reset)

(add-hook 'moom-font-after-resize-hook #'moom-move-frame-to-edge-top)
(defun my-mid-font-size ()
  (interactive)
  (moom-font-resize
   (floor (/ (+ moom-font-init-size (moom-fullscreen-font-size)) 2)))
  (moom-move-frame-to-center))
(defun my-frame-reset ()
  (interactive)
  (moom-font-size-reset)
  (moom-change-frame-width-single))
#+END_SRC

* Hooks

 - moom-before-fullscreen-hook
 - moom-after-fullscreen-hook
 - moom-resize-frame-height-hook
 - moom-font-before-resize-hook (in moom-font.el)
 - moom-font-after-resize-hook (in moom-font.el)

* References
  - [[https://manytricks.com/moom/][Moom Â· Many Tricks]]
    - "Mo"ve and zo"om"
