#+TITLE: Moom - A Moom port to GNU Emacs
#+STARTUP: showall

* Commands to control frame position and size by keyboard

#+CAPTION: demo for moving and zooming, fullscreen
[[./fig/demo1.gif]]

** Move

 - moom-move-frame

*** Horizontal

 - moom-move-frame-left
 - moom-move-frame-right

*** Center

 - moom-move-frame-to-center
 - moom-move-frame-to-vertical-center
 - moom-move-frame-to-horizontal-center

** Fit to edge

 - moom-move-frame-to-edge-left
 - moom-move-frame-to-edge-right
 - moom-move-frame-to-edge-top
 - moom-move-frame-to-edge-bottom

** Expand

 - moom-change-frame-width-single
 - moom-change-frame-width-double
 - moom-change-frame-width-half-again
 - moom-change-frame-width
 - moom-change-frame-height
 - moom-open-height-ring

** Fill display

 - moom-fill-top
 - moom-fill-bottom
 - moom-fill-left
 - moom-fill-right
 - moom-fill-top-left
 - moom-fill-top-right
 - moom-fill-bottom-left
 - moom-fill-bottom-right
 - moom-fill-band
 - moom-fit-frame-to-fullscreen

** Other functions

 - moom-update-height-steps
 - moom-restore-last-status
 - moom-toggle-font-module
 - moom-print-status
 - moom-version

* Extension to integrate font resizing

No need to load =moom-font.el= explicitly. If the package is installed in your system, then it will be activated automatically. The package is basically for the users who rely on Japanese fonts.

#+CAPTION: demo for increasing and decreasing fonts, fullscreen
[[./fig/demo2.gif]]

** Setting

=moom-font-ascii=, =moom-font-ja=, =moom-font-ja-scale= should be configured manually according to your environment. The default values are =Monaco=, =Migu 2M=, =1.2=. If you don't know your font, you can easily check by =M-x describe-char= on a character. In future, the font types will be automatically identified without any settings.

#+BEGIN_SRC emacs-lisp
(with-eval-after-load "moom-font"
  (setq moom-font-ascii "Menlo")
  (setq moom-font-ja "Osaka") ;; Hiragino Maru Gothic Pro
  (setq moom-font-ja-scale 1.2))
#+END_SRC

** Resize font

 - moom-font-increase
 - moom-font-decrease
 - moom-font-size-reset

* User variables
** moom.el

#+CAPTION: User variables in moom.el
|                                      |      default | type    |
|--------------------------------------+--------------+---------|
| moom-move-frame-pixel-menubar-offset |           23 | integer |
| moom-move-frame-pixel-offset         |     '(0 . 0) | sexp    |
| moom-min-frame-height                |           16 | integer |
| moom-init-line-spacing               | line-spacing | float   |
| moom-min-line-spacing                |          0.1 | float   |
| moom-max-line-spacing                |          0.8 | float   |
| moom-frame-width-single              |           80 | integer |
| moom-frame-width-double              |          163 | integer |
| moom-horizontal-shifts               |    '(200 200) | choice  |
| moom-verbose                         |          nil | boolean |

** moom-font.el

#+CAPTION: User variables in moom-font.el
|                     | default | type    |
|---------------------+---------+---------|
| moom-font-ja        | Migu 2M | string  |
| moom-font-ascii     | Monaco  | string  |
| moom-font-init-size | 12      | integer |
| moom-font-ja-scale  | 1.2     | float   |
| moom-font-verbose   | nil     | boolean |

* Example keybindings
** Overview

In general, =Cmd-<TAB>= is used to switch windows, which is not limited to Emacs.app. So it is natural to concentrate all keybindings associated to control frame position and size into the left side of your keyboard with pressing =Cmd=. The following example keybindings are basically designed in that manner.

#+CAPTION: Assgined keys
[[./fig/layout.png]]

** Move

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "M-0") 'moom-move-frame) ;; to top-left corner
(global-set-key (kbd "M-1") 'moom-move-frame-left)
(global-set-key (kbd "M-2") 'moom-move-frame-to-center)
(global-set-key (kbd "M-3") 'moom-move-frame-right)
#+END_SRC

** Fit

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "M-<f1>") 'moom-move-frame-to-edge-left)
(global-set-key (kbd "M-<f3>") 'moom-move-frame-to-edge-right)
(global-set-key (kbd "<f1>") 'moom-move-frame-to-edge-top)
(global-set-key (kbd "S-<f1>") 'moom-move-frame-to-edge-bottom)
#+END_SRC

** Expand

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "C-c f s") 'moom-change-frame-width-single)
(global-set-key (kbd "C-c f d") 'moom-change-frame-width-double)
(global-set-key (kbd "C-c f a") 'moom-change-frame-width-half-again)
(global-set-key (kbd "<f2>") 'moom-open-height-ring) ;; cycle heights on a list
#+END_SRC

** Fill

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "C-c f f t") 'moom-fill-top)
(global-set-key (kbd "C-c f f b") 'moom-fill-bottom)
(global-set-key (kbd "C-c f f l") 'moom-fill-left)
(global-set-key (kbd "C-c f f r") 'moom-fill-right)
(global-set-key (kbd "C-c f f 1") 'moom-fill-top-left)
(global-set-key (kbd "C-c f f 2") 'moom-fill-top-right)
(global-set-key (kbd "C-c f f 3") 'moom-fill-bottom-left)
(global-set-key (kbd "C-c f f 4") 'moom-fill-bottom-right)
(global-set-key (kbd "C-c f f m") 'moom-fill-band)
#+END_SRC

** Fill (screen by toggle)

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "M-<f2>") 'moom-toggle-frame-maximized)
#+END_SRC

** Reset and resize
*** Reset Frame size, position, and font size

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "C-c C-0") 'moom-reset)
#+END_SRC

*** Font size (require moom-font.el)

#+BEGIN_SRC emacs-lisp
(global-set-key (kbd "C--") 'moom-font-decrease)
(global-set-key (kbd "C-=") 'moom-font-increase)
(global-set-key (kbd "C-0") 'moom-font-size-reset)
(global-set-key (kbd "C-_") 'text-scale-decrease) ;; built-in for ascii
(global-set-key (kbd "C-+") 'text-scale-increase) ;; built-in for ascii

(add-hook 'moom-font-after-resize-hook #'moom-move-frame-to-edge-top)
#+END_SRC

* Hooks

 - moom-before-fullscreen-hook
 - moom-after-fullscreen-hook
 - moom-resize-frame-height-hook
 - moom-font-before-resize-hook (in moom-font.el)
 - moom-font-after-resize-hook (in moom-font.el)

* References
  - [[https://manytricks.com/moom/][Moom Â· Many Tricks]]
    - "Mo"ve and zo"om"
